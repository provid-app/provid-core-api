// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.

package query

import (
	"context"
	"database/sql"

	"gorm.io/gorm"

	"gorm.io/gen"

	"gorm.io/plugin/dbresolver"
)

var (
	Q                      = new(Query)
	AuthAuditLog           *authAuditLog
	AuthChallenge          *authChallenge
	MCategory              *mCategory
	MConfigApp             *mConfigApp
	MMission               *mMission
	MSegman                *mSegman
	MUserConfig            *mUserConfig
	MailLog                *mailLog
	OtpRequest             *otpRequest
	User                   *user
	UserIdentity           *userIdentity
	UserPasswordCredential *userPasswordCredential
	UserPin                *userPin
	UserProfile            *userProfile
	UserSession            *userSession
)

func SetDefault(db *gorm.DB, opts ...gen.DOOption) {
	*Q = *Use(db, opts...)
	AuthAuditLog = &Q.AuthAuditLog
	AuthChallenge = &Q.AuthChallenge
	MCategory = &Q.MCategory
	MConfigApp = &Q.MConfigApp
	MMission = &Q.MMission
	MSegman = &Q.MSegman
	MUserConfig = &Q.MUserConfig
	MailLog = &Q.MailLog
	OtpRequest = &Q.OtpRequest
	User = &Q.User
	UserIdentity = &Q.UserIdentity
	UserPasswordCredential = &Q.UserPasswordCredential
	UserPin = &Q.UserPin
	UserProfile = &Q.UserProfile
	UserSession = &Q.UserSession
}

func Use(db *gorm.DB, opts ...gen.DOOption) *Query {
	return &Query{
		db:                     db,
		AuthAuditLog:           newAuthAuditLog(db, opts...),
		AuthChallenge:          newAuthChallenge(db, opts...),
		MCategory:              newMCategory(db, opts...),
		MConfigApp:             newMConfigApp(db, opts...),
		MMission:               newMMission(db, opts...),
		MSegman:                newMSegman(db, opts...),
		MUserConfig:            newMUserConfig(db, opts...),
		MailLog:                newMailLog(db, opts...),
		OtpRequest:             newOtpRequest(db, opts...),
		User:                   newUser(db, opts...),
		UserIdentity:           newUserIdentity(db, opts...),
		UserPasswordCredential: newUserPasswordCredential(db, opts...),
		UserPin:                newUserPin(db, opts...),
		UserProfile:            newUserProfile(db, opts...),
		UserSession:            newUserSession(db, opts...),
	}
}

type Query struct {
	db *gorm.DB

	AuthAuditLog           authAuditLog
	AuthChallenge          authChallenge
	MCategory              mCategory
	MConfigApp             mConfigApp
	MMission               mMission
	MSegman                mSegman
	MUserConfig            mUserConfig
	MailLog                mailLog
	OtpRequest             otpRequest
	User                   user
	UserIdentity           userIdentity
	UserPasswordCredential userPasswordCredential
	UserPin                userPin
	UserProfile            userProfile
	UserSession            userSession
}

func (q *Query) Available() bool { return q.db != nil }

func (q *Query) clone(db *gorm.DB) *Query {
	return &Query{
		db:                     db,
		AuthAuditLog:           q.AuthAuditLog.clone(db),
		AuthChallenge:          q.AuthChallenge.clone(db),
		MCategory:              q.MCategory.clone(db),
		MConfigApp:             q.MConfigApp.clone(db),
		MMission:               q.MMission.clone(db),
		MSegman:                q.MSegman.clone(db),
		MUserConfig:            q.MUserConfig.clone(db),
		MailLog:                q.MailLog.clone(db),
		OtpRequest:             q.OtpRequest.clone(db),
		User:                   q.User.clone(db),
		UserIdentity:           q.UserIdentity.clone(db),
		UserPasswordCredential: q.UserPasswordCredential.clone(db),
		UserPin:                q.UserPin.clone(db),
		UserProfile:            q.UserProfile.clone(db),
		UserSession:            q.UserSession.clone(db),
	}
}

func (q *Query) ReadDB() *Query {
	return q.ReplaceDB(q.db.Clauses(dbresolver.Read))
}

func (q *Query) WriteDB() *Query {
	return q.ReplaceDB(q.db.Clauses(dbresolver.Write))
}

func (q *Query) ReplaceDB(db *gorm.DB) *Query {
	return &Query{
		db:                     db,
		AuthAuditLog:           q.AuthAuditLog.replaceDB(db),
		AuthChallenge:          q.AuthChallenge.replaceDB(db),
		MCategory:              q.MCategory.replaceDB(db),
		MConfigApp:             q.MConfigApp.replaceDB(db),
		MMission:               q.MMission.replaceDB(db),
		MSegman:                q.MSegman.replaceDB(db),
		MUserConfig:            q.MUserConfig.replaceDB(db),
		MailLog:                q.MailLog.replaceDB(db),
		OtpRequest:             q.OtpRequest.replaceDB(db),
		User:                   q.User.replaceDB(db),
		UserIdentity:           q.UserIdentity.replaceDB(db),
		UserPasswordCredential: q.UserPasswordCredential.replaceDB(db),
		UserPin:                q.UserPin.replaceDB(db),
		UserProfile:            q.UserProfile.replaceDB(db),
		UserSession:            q.UserSession.replaceDB(db),
	}
}

type queryCtx struct {
	AuthAuditLog           IAuthAuditLogDo
	AuthChallenge          IAuthChallengeDo
	MCategory              IMCategoryDo
	MConfigApp             IMConfigAppDo
	MMission               IMMissionDo
	MSegman                IMSegmanDo
	MUserConfig            IMUserConfigDo
	MailLog                IMailLogDo
	OtpRequest             IOtpRequestDo
	User                   IUserDo
	UserIdentity           IUserIdentityDo
	UserPasswordCredential IUserPasswordCredentialDo
	UserPin                IUserPinDo
	UserProfile            IUserProfileDo
	UserSession            IUserSessionDo
}

func (q *Query) WithContext(ctx context.Context) *queryCtx {
	return &queryCtx{
		AuthAuditLog:           q.AuthAuditLog.WithContext(ctx),
		AuthChallenge:          q.AuthChallenge.WithContext(ctx),
		MCategory:              q.MCategory.WithContext(ctx),
		MConfigApp:             q.MConfigApp.WithContext(ctx),
		MMission:               q.MMission.WithContext(ctx),
		MSegman:                q.MSegman.WithContext(ctx),
		MUserConfig:            q.MUserConfig.WithContext(ctx),
		MailLog:                q.MailLog.WithContext(ctx),
		OtpRequest:             q.OtpRequest.WithContext(ctx),
		User:                   q.User.WithContext(ctx),
		UserIdentity:           q.UserIdentity.WithContext(ctx),
		UserPasswordCredential: q.UserPasswordCredential.WithContext(ctx),
		UserPin:                q.UserPin.WithContext(ctx),
		UserProfile:            q.UserProfile.WithContext(ctx),
		UserSession:            q.UserSession.WithContext(ctx),
	}
}

func (q *Query) Transaction(fc func(tx *Query) error, opts ...*sql.TxOptions) error {
	return q.db.Transaction(func(tx *gorm.DB) error { return fc(q.clone(tx)) }, opts...)
}

func (q *Query) Begin(opts ...*sql.TxOptions) *QueryTx {
	tx := q.db.Begin(opts...)
	return &QueryTx{Query: q.clone(tx), Error: tx.Error}
}

type QueryTx struct {
	*Query
	Error error
}

func (q *QueryTx) Commit() error {
	return q.db.Commit().Error
}

func (q *QueryTx) Rollback() error {
	return q.db.Rollback().Error
}

func (q *QueryTx) SavePoint(name string) error {
	return q.db.SavePoint(name).Error
}

func (q *QueryTx) RollbackTo(name string) error {
	return q.db.RollbackTo(name).Error
}
